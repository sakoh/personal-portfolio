<!DOCTYPE html>
<html
    lang="en-us"
    class="no-js"
>


<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="">
    <meta name="description" content="">
    
    <meta name="generator" content="Hugo 0.15" />
    <meta name="generation-date" content="2016-08-19 14:14:12.751771647 -0700 PDT">
    <title>Creating a Youtube Player with React and Redux &middot; Sako Hartounian - Web Developer</title>
    <link rel="shortcut icon" href="https://rawgithub.com/sakoh/portfolio/gh-pages/img/favicon.ico">
    <link rel="icon" href="https://rawgithub.com/sakoh/portfolio/gh-pages/img/favicon.ico">
    
<link rel="stylesheet" href="https://rawgithub.com/sakoh/portfolio/gh-pages/css/materialize.min.css">


<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">


    
    <link rel="stylesheet" href="https://rawgithub.com/sakoh/portfolio/gh-pages/css/styles/solarized_dark.css">



<link rel="stylesheet" href="https://rawgithub.com/sakoh/portfolio/gh-pages/css/lightbox.css">


<link rel="stylesheet" href="https://rawgithub.com/sakoh/portfolio/gh-pages/css/main.css">

    <script src="https://rawgithub.com/sakoh/portfolio/gh-pages/js/modernizr-latest.js"></script>
    <script src="https://rawgithub.com/sakoh/portfolio/gh-pages/js/lazysizes.min.js"></script>
    <script src="https://rawgithub.com/sakoh/portfolio/gh-pages/js/ls.noscript.min.js"></script>

    <script>
        window.lazySizesConfig = window.lazySizesConfig || {};
        lazySizesConfig.addClasses = true;
        lazySizesConfig.loadMode = 2;
    </script>

    
</head>


<body class="page-colors minimum-viewport-height">
    

<nav class="main-menu menu-colors">
    <ul class="menu menu-colors no-list-float">
        <li><a href="https://rawgithub.com/sakoh/portfolio/gh-pages/"><i class="fa fa-home fa-2x"></i></a></li>
        <li>
            <a href="#!"><i class="fa fa-bars fa-2x"></i></a>

            
            <ul class="menu flexible-width menu-colors no-list-float">
                
                
                    <li >
                    
                        <a href="https://rawgithub.com/sakoh/portfolio/gh-pages//sakoh/portfolio/gh-pages/demo/">
                            
                            <span>Demo</span>
                        </a>
                    
                    </li>
                
                    <li class="active">
                    
                        <a href="https://rawgithub.com/sakoh/portfolio/gh-pages//sakoh/portfolio/gh-pages/post/">
                            
                            <span>Post</span>
                        </a>
                    
                    </li>
                
                    <li >
                    
                        <a href="https://rawgithub.com/sakoh/portfolio/gh-pages//sakoh/portfolio/gh-pages/website/">
                            
                            <span>Website</span>
                        </a>
                    
                    </li>
                
            </ul>
        </li>
        <li><a href="#!" data-lightbox-id="searchbox"><i class="fa fa-search fa-2x"></i></a></li>
        
            <li class="blue-grey-text" style="border-top: 1px solid;"></li>
            
                <li>
                    <a href="https://twitter.com/sakohartounian">
                        <i class="fa fa-twitter fa-2x"></i>
                    </a>
                </li>
            
                <li>
                    <a href="https://www.linkedin.com/in/sako-hartounian-085ba92a?trk=nav_responsive_tab_profile">
                        <i class="fa fa-linkedin fa-2x"></i>
                    </a>
                </li>
            
                <li>
                    <a href="https://plus.google.com/106448025503162765323">
                        <i class="fa fa-google-plus fa-2x"></i>
                    </a>
                </li>
            
                <li>
                    <a href="http://github.com/sakoh">
                        <i class="fa fa-github fa-2x"></i>
                    </a>
                </li>
            
        
        <li class="blue-grey-text" style="border-top: 1px solid;"></li>
        <li>
            <a href="" type="application/rss+xml" target="_blank">
                <i class="fa fa-rss fa-2x"></i>
            </a>
        </li>
    </ul>
</nav>

<div id="searchbox" class="no-display">
    <div class="valign-wrapper fill-container">
        <div class="valign large-form horizontal-center-hack">
            <form method="get" id="search" action="http://duckduckgo.com/">
    <input type="hidden" name="sites"value="https://rawgithub.com/sakoh/portfolio/gh-pages/"/>
    <input type="hidden" name="ka" value="h"/>
    <input type="hidden" name="k7" value="#fafafa"/>
    <input type="hidden" name="kj" value="#3f3f3f"/>
    <input type="hidden" name="ky" value="#fafafa"/>
    <input type="hidden" name="kx" value="b"/>
    <input type="hidden" name="kt" value="Helvetica"/>
    <input type="text" name="q" maxlength="255" placeholder="Search"/>
    <input type="submit" value="DuckDuckGo Search" style="visibility: hidden;" />
</form>

        </div>
    </div>
</div>



    <div class="main-content">
        <div class="center-space">
            <div class="article-colors">
                
                <article>
                    <header>
                        <h1 class="article-title">Creating a Youtube Player with React and Redux</h1>
                        
                            <h4>
                                By <a href="mailto:sakohartounian@yahoo.com">Sako Hartounian</a>
                            </h4>
                        
                        <time class="date-color">Tue Aug 09, 2016</time>
                        <span class="separator">|</span>
                        
<ul class="categories">
    <li>
        <i class="fa fa-book"></i>
    </li>
    
        <li><a href="https://rawgithub.com/sakoh/portfolio/gh-pages/categories/javasript">JavaSript</a></li>
    
</ul>

                        <span class="separator">|</span>
                        
<ul class="tags">
    <li>
        <i class="fa fa-tags"></i>
    </li>
    
        <li><a href="https://rawgithub.com/sakoh/portfolio/gh-pages/tags/react.js">React.js</a></li>
    
        <li><a href="https://rawgithub.com/sakoh/portfolio/gh-pages/tags/redux">Redux</a></li>
    
        <li><a href="https://rawgithub.com/sakoh/portfolio/gh-pages/tags/javascript">JavaScript</a></li>
    
        <li><a href="https://rawgithub.com/sakoh/portfolio/gh-pages/tags/youtube">Youtube</a></li>
    
        <li><a href="https://rawgithub.com/sakoh/portfolio/gh-pages/tags/api">API</a></li>
    
</ul>

                    </header>

                    <hr>

                    <section>
                        
                            

<p>Today we will create a youtube player using the <a href="https://facebook.github.io/react/">React</a>, a JavaScript UI component library by Facebook, and <a href="http://redux.js.org/docs/introduction/">Redux</a>, a library for containing the application state in a single object tree and unidirectional dataflow.</p>

<h4 id="how-redux-and-react-work-together:28ea30338ee8b6ca6a01972ac2254731">How Redux and React Work together</h4>

<p>To give a idea of React and Redux work together, take a look at the diagram below:
<img src="/img/react-redux-diagram.png" alt="React Redux Diagram" /></p>

<p>As you see, components send actions to reducers, which in return the application state of the entire component.</p>

<h4 id="getting-started:28ea30338ee8b6ca6a01972ac2254731">Getting started</h4>

<p>We begin by cloning <a href="https://github.com/StephenGrider/ReduxSimpleStarter">Stephen Grider&rsquo;s Redux Simple Starter</a>:</p>

<pre><code>git clone git@github.com:StephenGrider/ReduxSimpleStarter.git PROJECT_NAME
cd PROJECT_NAME
</code></pre>

<p>install the dependencies <a href="https://github.com/gaearon/redux-thunk">Redux Thunk</a>, which is a middleware which allows you to return callbacks that dispatch actions, and <a href="https://github.com/lodash/lodash">lodash</a>, of which we will pull off <code>debounce</code> to slow down the exection of the search as you are typing.</p>

<pre><code>npm install --save redux-thunk lodash
</code></pre>

<h4 id="files-to-add:28ea30338ee8b6ca6a01972ac2254731">Files To Add</h4>

<p>Next will we create the following files in the components folder of the src folder:</p>

<pre><code> PROJECT_NAME/
   src/
      components/
        +  search_bar.js
        +  video_player.js
        +  video_preview.js
        +  video_preview_list.js
</code></pre>

<p>Then we are going to create the following files in actions folder of the src folder:</p>

<pre><code>PROJECT_NAME/
  src/
     actions/
       + index.js
       + types.js
</code></pre>

<p>Then we are going to create the following files in reducers folder of the src folder:</p>

<pre><code>PROJECT_NAME/
  src/
     reducers/
       + index.js
       + videos_reducer.js
</code></pre>

<h4 id="components:28ea30338ee8b6ca6a01972ac2254731">Components</h4>

<p>Then add the following code the new created files:</p>

<pre><code class="language-javascript">// PROJECT_NAME/src/components/app.js
import { debounce } from 'lodash';
import React, { Component } from 'react';
import YTSearch from 'youtube-api-search';
import { connect } from 'react-redux';

import * as actions from '../actions';
import SearchBar from './search_bar';
import VideoPlayer from './video_player';
import VideoPreviewList from './video_preview_list';

class App extends Component {
  componentWillMount() {
    this.props.searchVideos('surfboards');
  }

  render() {
    const { videos, selectedVideo } = this.props;

    if(!videos || !selectedVideo) {
      return (
        &lt;div&gt;...Loading&lt;/div&gt;
      );
    }

    return (
      &lt;div className=&quot;app-component&quot;&gt;
        &lt;SearchBar/&gt;
        &lt;div className=&quot;row&quot;&gt;
          &lt;VideoPlayer
            video={selectedVideo} /&gt;
          &lt;VideoPreviewList
            videos={videos} /&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    );
  }
}

function mapStateToProps(state) {
  return { videos: state.video.videos, selectedVideo: state.video.selectedVideo };
}

export default connect(mapStateToProps, actions)(App);
</code></pre>

<pre><code class="language-javascript">// PROJECT_NAME/src/components/search_bar.js
import React, { Component } from 'react';
import { connect } from 'react-redux';
import { debounce } from 'lodash';
import * as actions from '../actions';

class SearchBar extends Component {

  onInputChange(term) {
    debounce(this.props.searchVideos(term), 300);
  }

  render() {
    return (
      &lt;div className=&quot;search-bar-component form-group row&quot;&gt;
        &lt;input
          className=&quot;form-control&quot;
          onChange={event =&gt; this.onInputChange(event.target.value)}
          type=&quot;text&quot;
          placeholder=&quot;Search&quot;/&gt;
      &lt;/div&gt;
    );
  }
}

export default connect(null, actions)(SearchBar);
</code></pre>

<pre><code class="language-javascript">// PROJECT_NAME/src/components/video_player.js
import React from 'react';

export default function VideoPlayer({ video }) {
  if(!video) {
    return (
      &lt;div&gt;...Loading&lt;/div&gt;
    );
  }

  const {
    snippet: { title, description }, id: { videoId }
  } = video;

  const url = `https://youtube.com/embed/${videoId}`;

  return (
    &lt;div className=&quot;video-player-component col-md-8&quot;&gt;
      &lt;div className=&quot;embed-responsive embed-responsive-16by9&quot;&gt;
        &lt;iframe className=&quot;embed-responsive-item&quot; src={url}&gt;&lt;/iframe&gt;
      &lt;/div&gt;
      &lt;div className=&quot;details&quot;&gt;
        &lt;strong&gt;{title}&lt;/strong&gt;
        &lt;p&gt;{description}&lt;/p&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
};
</code></pre>

<pre><code class="language-javascript">// PROJECT_NAME/src/components/video_preview.js
import React, { Component } from 'react';
import { connect } from 'react-redux';
import * as actions from '../actions';

class VideoPreview extends Component {

  render() {
    const { video, selectVideo } = this.props;
    const {
      snippet: {
        title,
        thumbnails: {
          default: { url }
        }
      }
    } = video;

    return (
      &lt;li onClick={() =&gt; selectVideo(video)} className=&quot;list-group-item video-preview-component&quot;&gt;
        &lt;div className=&quot;video-list media&quot;&gt;
          &lt;div className=&quot;media-left&quot;&gt;
            &lt;img className=&quot;media-object&quot; src={url} /&gt;
          &lt;/div&gt;
          &lt;div className=&quot;media-body&quot;&gt;
            &lt;div className=&quot;media-heading&quot;&gt;{title}&lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/li&gt;
    );
  }

}

export default connect(null, actions)(VideoPreview);
</code></pre>

<pre><code class="language-javascript">// PROJECT_NAME/src/components/video_preview_list.js
import React from 'react';
import VideoPreview from './video_preview';

export default function VideoPreviewList({ videos }) {

  const videosList = videos.map(video =&gt;
    &lt;VideoPreview key={video.etag} video={video} /&gt;
  );

  return (
    &lt;ul className=&quot;col-md-4 list-group&quot;&gt;
      {videosList}
    &lt;/ul&gt;
  );
}
</code></pre>

<h4 id="actions:28ea30338ee8b6ca6a01972ac2254731">Actions</h4>

<pre><code class="language-javascript">// PROJECT_NAME/src/actions/types.js
export const SEARCH_VIDEOS = 'SEARCH_VIDEOS';
export const SELECT_VIDEO = 'SELECT_VIDEO';
</code></pre>

<p>In this example, we are using <a href="https://github.com/gaearon/redux-thunk">Redux Thunk</a>, which is a middleware that returns actions as a callback before sending them to the Reducer. This real for this is because we need to grab data from the youtube API server to use in the action before sending it to the reducer, which will in turn send it to the application state.</p>

<pre><code class="language-javascript">// PROJECT_NAME/src/actions/index.js
import YTSearch from 'youtube-api-search';
import { SEARCH_VIDEOS, SELECT_VIDEO } from './types';

const API_KEY = &quot;$YOUTUBE_API_KEY&quot;;

export const searchVideos = (term) =&gt; (dispatch) =&gt; {
  YTSearch({ key: API_KEY, term }, videos =&gt; {

    const payload = {
      videos,
      selectedVideo: videos[0]
    };

    dispatch({ type: SEARCH_VIDEOS, payload });
  });
}

export function selectVideo(video) {
  return { type: SELECT_VIDEO, payload: video };
}
</code></pre>

<h4 id="reducers:28ea30338ee8b6ca6a01972ac2254731">Reducers</h4>

<pre><code class="language-javascript">// PROJECT_NAME/src/reducers/videos_reducer.js
import {
  SEARCH_VIDEOS,
  SELECT_VIDEO
} from '../actions/types';

export default function(state = {}, action) {
  switch(action.type) {
    case SEARCH_VIDEOS:
      return { ...state, selectedVideo: action.payload.selectedVideo, videos: action.payload.videos };
    case SELECT_VIDEO:
      return { ...state, selectedVideo: action.payload };
  }

  return state;
}
</code></pre>

<pre><code class="language-javascript">import { combineReducers } from 'redux';
import videosReducer from './videos_reducer';

const rootReducer = combineReducers({
  video: videosReducer
});

export default rootReducer;
</code></pre>

<h4 id="index-file:28ea30338ee8b6ca6a01972ac2254731">Index File</h4>

<p>Now in your index file of your src folder to activate your redux-thunk as a middleware:</p>

<pre><code class="language-javascript">import React from 'react';
import { render } from 'react-dom';
import { Provider } from 'react-redux';
import { createStore, applyMiddleware } from 'redux';
import thunk from 'redux-thunk';

import App from './components/app';
import reducers from './reducers';

const createStoreWithMiddleware = applyMiddleware(thunk)(createStore);
const store = createStoreWithMiddleware(reducers);

render(
  &lt;Provider store={store}&gt;
    &lt;App /&gt;
  &lt;/Provider&gt;,
  document.querySelector('.container')
);
</code></pre>

<h4 id="final-result:28ea30338ee8b6ca6a01972ac2254731">Final Result</h4>

<p>now run the following command in your terminal:</p>

<pre><code>npm start
</code></pre>

<p>And when you visit <a href="http://localhost:8080">http://localhost:8080</a>, you should see this:
<img src="/img/react-redux-youtube-player.png" alt="React Redux Youtube Player" /></p>

<p>Now you should be able to search for any youtube video and the preview list to the right should update.</p>

<p><img src="/img/batman-search.png" alt="Youtube Batman Search" /></p>

<h4 id="github-code-repository:28ea30338ee8b6ca6a01972ac2254731">Github Code Repository</h4>

<p>The source code is found at <a href="http://github.com/sakoh/react-redux-youtube-player">here</a></p>

                        
                    </section>

                    <footer class="right-align">
                        <p><small>Copyright &#169; by Sako Hartounian</small></p>
                    </footer>

                    

                </article>
            </div>
        </div>
    </div>

    
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>


<script src="https://rawgithub.com/sakoh/portfolio/gh-pages/js/materialize.min.js"></script>


<script src="https://rawgithub.com/sakoh/portfolio/gh-pages/js/imagesloaded.pkgd.min.js"></script>


<script src="https://rawgithub.com/sakoh/portfolio/gh-pages/js/masonry.pkgd.min.js"></script>


    
    <script src="https://rawgithub.com/sakoh/portfolio/gh-pages/js/highlight.pack.js"></script>



<script src="https://rawgithub.com/sakoh/portfolio/gh-pages/js/lightbox.min.js"></script>


<script src="https://rawgithub.com/sakoh/portfolio/gh-pages/js/jquery.infinitescroll.min.js"></script>


<script src="https://rawgithub.com/sakoh/portfolio/gh-pages/js/main.js"></script>

</body>

</html>


